<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-gray-900">Profil</h1>
      <p class="mt-2 text-gray-600">Profil bilgilerinizi görüntüleyin ve düzenleyin</p>
    </div>

    <!-- Loading State -->
    @if (isLoading) {
      <div class="flex justify-center items-center py-12">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
      </div>
    }

    <!-- Error State -->
    @if (!isLoading && !userProfile) {
      <div class="text-center py-12">
        <div class="text-red-500 mb-4">
          <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </div>
        <h3 class="text-lg font-medium text-gray-900 mb-2">Profil Yüklenemedi</h3>
        <p class="text-gray-600 mb-4">Profil bilgileriniz yüklenirken bir hata oluştu.</p>
        <button
          (click)="loadUserProfile()"
          class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors">
          Tekrar Dene
        </button>
      </div>
    }

    <!-- Profile Content -->
    @if (!isLoading && userProfile) {
      <!-- Profile Card -->
      <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
        <!-- Cover Background -->
        <div class="h-32 bg-gradient-to-r from-blue-500 to-purple-600"></div>

        <!-- Profile Content -->
        <div class="relative px-6 pb-8">
          <!-- Profile Image Section -->
          <div class="flex flex-col items-center -mt-16 mb-6">
            <div class="relative">
              <!-- Profile Image -->
              <div
                class="w-32 h-32 rounded-full border-4 border-white shadow-lg overflow-hidden bg-gray-200 flex items-center justify-center">
                @if (userProfile.hasProfileImage && userProfile.profileImageUrl && !imageError) {
                  <img
                    [src]="userProfile.profileImageUrl"
                    [alt]="userProfile.name + ' profil fotoğrafı'"
                    (error)="onImageError()"
                    class="w-full h-full object-cover">
                } @else {
                  <img
                    src="./assets/images/default_profile_image.png"
                    [alt]="userProfile.name + ' varsayılan profil fotoğrafı'"
                    class="w-full h-full object-cover"
                    (error)="onDefaultImageError()"
                    onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                  <!-- SVG Fallback Icon -->
                  <div class="text-gray-400 hidden flex-col items-center justify-center w-full h-full">
                    <svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                  </div>
                }
              </div>

              <!-- Loading Overlay -->
              @if (isUploading) {
                <div class="absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center">
                  <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div>
                </div>
              }

              <!-- Camera Icon -->
              <button
                (click)="updateProfileImage()"
                [disabled]="isUploading"
                class="absolute bottom-2 right-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-full p-2 shadow-lg transition-colors duration-200">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
              </button>
            </div>

            <!-- Image Action Buttons -->
            <div class="flex gap-3 mt-4">
              <button
                (click)="updateProfileImage()"
                [disabled]="isUploading"
                class="px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200 flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                </svg>
                {{ userProfile.hasProfileImage ? 'Güncelle' : 'Yükle' }}
              </button>
              @if (userProfile.hasProfileImage) {
                <button
                  (click)="deleteProfileImage()"
                  [disabled]="isUploading"
                  class="px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200 flex items-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                  </svg>
                  Sil
                </button>
              }
            </div>
          </div>

          <!-- User Information -->
          <div class="text-center mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-2">{{ userProfile.name }}</h2>
            <p class="text-gray-600 mb-4">{{ userProfile.email }}</p>
            <div
              class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
              <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
              Aktif
            </div>
          </div>

          <!-- Profile Stats/Info Grid -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-gray-50 rounded-xl p-6 text-center">
              <div class="text-2xl font-bold text-blue-600 mb-2">24</div>
              <div class="text-gray-600 text-sm">Toplam Gönderi</div>
            </div>
            <div class="bg-gray-50 rounded-xl p-6 text-center">
              <div class="text-2xl font-bold text-green-600 mb-2">156</div>
              <div class="text-gray-600 text-sm">Beğeni</div>
            </div>
            <div class="bg-gray-50 rounded-xl p-6 text-center">
              <div class="text-2xl font-bold text-purple-600 mb-2">12</div>
              <div class="text-gray-600 text-sm">Yorum</div>
            </div>
          </div>

          <!-- Profile Details -->
          <div class="space-y-6">
            <div class="bg-gray-50 rounded-xl p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Profil Bilgileri</h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0">
                  <span class="text-gray-600 font-medium">Kullanıcı ID:</span>
                  <span class="text-gray-900 font-mono text-sm">{{ userProfile.id }}</span>
                </div>
                <div class="flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0">
                  <span class="text-gray-600 font-medium">Ad Soyad:</span>
                  <span class="text-gray-900">{{ userProfile.name }}</span>
                </div>
                <div class="flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0">
                  <span class="text-gray-600 font-medium">E-posta:</span>
                  <span class="text-gray-900">{{ userProfile.email }}</span>
                </div>
                <div class="flex items-center justify-between py-3">
                  <span class="text-gray-600 font-medium">Profil Fotoğrafı:</span>
                  <span class="text-gray-900">
                  <span [class]="userProfile.hasProfileImage ? 'text-green-600' : 'text-red-600'">
                    {{ userProfile.hasProfileImage ? 'Mevcut' : 'Yok' }}
                  </span>
                </span>
                </div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 mt-8">
            <button
              class="flex-1 bg-gray-900 hover:bg-gray-800 text-white rounded-xl py-3 px-6 font-medium transition-colors duration-200 flex items-center justify-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
              </svg>
              Profili Düzenle
            </button>
            <button
              class="flex-1 bg-blue-500 hover:bg-blue-600 text-white rounded-xl py-3 px-6 font-medium transition-colors duration-200 flex items-center justify-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
              </svg>
              Gönderilerim
            </button>
          </div>
        </div>
      </div>

      <!-- Hidden File Input -->
      <input
        #fileInput
        id="fileInput"
        type="file"
        accept="image/*"
        (change)="onFileSelected($event)"
        class="hidden">

    }
  </div>
</div>
